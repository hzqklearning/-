<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title >web socket 测试</title>
    </head>
    <body>
        <button id="btn">连接</button>
        <button id="btn_close">关闭连接</button>
        <input id="ipt" value="">
        <div id="show">显示结果</div>
    </body>
</html>

<script src="http://libs.baidu.com/jquery/2.0.0/jquery.min.js"></script>
<script>
    var ws = new WebSocket("ws://127.0.0.1:3000");
    ws.onopen = function(){
        document.getElementById("show").innerHTML = "连接建立"
    };
 
    $("#btn").click(function(){
        var value = document.getElementById('ipt').value
        ws.send(value);
        console.log(value);
    })

    $("#btn_close").click(function(){
        ws.close()
    })
    ws.onmessage = function(evt){
        $("#show").text(evt.data);
    };
    ws.onclose = function(){
        alert('连接已关闭');
    };
</script>